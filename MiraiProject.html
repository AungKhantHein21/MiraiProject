<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Monty Hall Paradox: An Explorable Explanation</title>
    <style>
        body { font-family: 'Helvetica Neue', sans-serif; text-align: center; background-color: #f0f3f5; color: #333; padding: 20px; }
        h1 { font-weight: 700; margin-bottom: 10px; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        
        /* The Doors */
        .doors-container { display: flex; justify-content: center; gap: 20px; margin: 40px 0; }
        .door-wrapper { position: relative; width: 120px; height: 180px; cursor: pointer; perspective: 1000px; }
        .door { width: 100%; height: 100%; background: #ff6b6b; border-radius: 8px; position: absolute; top: 0; transition: transform 0.6s; transform-origin: left; z-index: 2; display: flex; align-items: center; justify-content: center; font-size: 2em; color: white; font-weight: bold; border: 4px solid #c92a2a; }
        .prize { position: absolute; width: 100%; height: 100%; top: 0; left: 0; display: flex; align-items: center; justify-content: center; font-size: 3em; background: #e9ecef; border-radius: 8px; z-index: 1; border: 4px solid #dee2e6; }
        
        .door.open { transform: rotateY(-110deg); }
        .door.selected { border-color: #339af0; box-shadow: 0 0 15px #339af0; }

        /* Controls */
        #instruction { font-size: 1.2em; margin-bottom: 20px; height: 1.5em; font-weight: bold; color: #1c7ed6; }
        .btn { padding: 10px 20px; font-size: 1em; background: #339af0; color: white; border: none; border-radius: 5px; cursor: pointer; display: none; margin: 10px; }
        .btn:hover { background: #1c7ed6; }

        /* Stats */
        .stats-box { margin-top: 50px; padding-top: 20px; border-top: 2px solid #eee; display: flex; justify-content: space-around; }
        .stat-item { text-align: center; }
        .big-number { font-size: 2em; font-weight: bold; display: block; }
        .bar-container { width: 100px; height: 100px; background: #eee; position: relative; margin: 0 auto; margin-bottom: 10px; border-radius: 50%; overflow: hidden; }
        .bar-fill { position: absolute; bottom: 0; width: 100%; background: #51cf66; transition: height 0.5s; }
        
    </style>
</head>
<body>

<div class="container">
    <h1>The Monty Hall Paradox</h1>
    <p>An Interactive Proof by [Your Name]</p>
    
    <div id="instruction">Pick a door to start!</div>

    <div class="doors-container">
        <div class="door-wrapper" onclick="clickDoor(0)">
            <div class="prize" id="prize-0">üêê</div>
            <div class="door" id="door-0">1</div>
        </div>
        <div class="door-wrapper" onclick="clickDoor(1)">
            <div class="prize" id="prize-1">üêê</div>
            <div class="door" id="door-1">2</div>
        </div>
        <div class="door-wrapper" onclick="clickDoor(2)">
            <div class="prize" id="prize-2">üêê</div>
            <div class="door" id="door-2">3</div>
        </div>
    </div>

    <div id="controls">
        <button class="btn" id="btn-switch" onclick="finalizeChoice(true)">Switch Door!</button>
        <button class="btn" id="btn-stay" onclick="finalizeChoice(false)">Stay</button>
        <button class="btn" id="btn-reset" onclick="initGame()">Play Again</button>
        <button class="btn" id="btn-sim" style="background-color: #845ef7; display: inline-block;" onclick="runSimulation()">Fast Forward (1000 Runs)</button>
    </div>

    <div class="stats-box">
        <div class="stat-item">
            <div class="bar-container"><div class="bar-fill" id="bar-stay" style="height: 0%"></div></div>
            <span class="big-number" id="win-stay">0%</span>
            Win Rate (Stay)
        </div>
        <div class="stat-item">
            <div class="bar-container"><div class="bar-fill" id="bar-switch" style="height: 0%"></div></div>
            <span class="big-number" id="win-switch">0%</span>
            Win Rate (Switch)
        </div>
    </div>
</div>

<script>
    let carLocation, selectedDoor, state; // state: 0=pick, 1=reveal, 2=result
    const instruction = document.getElementById('instruction');
    
    // Stats
    let results = { stay: {wins:0, total:0}, switch: {wins:0, total:0} };

    function initGame() {
        state = 0;
        selectedDoor = -1;
        carLocation = Math.floor(Math.random() * 3);
        
        // Reset UI
        for(let i=0; i<3; i++) {
            document.getElementById(`door-${i}`).classList.remove('open', 'selected');
            document.getElementById(`prize-${i}`).innerText = (i === carLocation) ? "üöó" : "üêê";
        }
        instruction.innerText = "Pick a door to start!";
        document.getElementById('btn-switch').style.display = 'none';
        document.getElementById('btn-stay').style.display = 'none';
        document.getElementById('btn-reset').style.display = 'none';
    }

    function clickDoor(index) {
        if (state !== 0) return;
        selectedDoor = index;
        document.getElementById(`door-${index}`).classList.add('selected');
        
        // Host opens a door
        let doors = [0,1,2];
        let availableToOpen = doors.filter(d => d !== selectedDoor && d !== carLocation);
        let openDoor = availableToOpen[Math.floor(Math.random() * availableToOpen.length)];
        
        document.getElementById(`door-${openDoor}`).classList.add('open');
        instruction.innerText = `Host revealed a Goat in Door ${openDoor+1}. Do you want to switch?`;
        
        state = 1;
        document.getElementById('btn-switch').style.display = 'inline-block';
        document.getElementById('btn-stay').style.display = 'inline-block';
    }

    function finalizeChoice(didSwitch) {
        if (state !== 1) return;
        
        let finalDoor = selectedDoor;
        if (didSwitch) {
            // Find the door that is neither selected nor open
            for(let i=0; i<3; i++) {
                if(i !== selectedDoor && !document.getElementById(`door-${i}`).classList.contains('open')) {
                    finalDoor = i;
                    break;
                }
            }
            // Move selection visual
            document.getElementById(`door-${selectedDoor}`).classList.remove('selected');
            document.getElementById(`door-${finalDoor}`).classList.add('selected');
        }

        // Reveal
        document.getElementById(`door-${finalDoor}`).classList.add('open');
        let won = (finalDoor === carLocation);
        
        instruction.innerText = won ? "YOU WON A CAR! üéâ" : "You got a goat. üêê";
        
        // Update Stats
        if(didSwitch) { results.switch.total++; if(won) results.switch.wins++; }
        else { results.stay.total++; if(won) results.stay.wins++; }
        updateStats();

        state = 2;
        document.getElementById('btn-switch').style.display = 'none';
        document.getElementById('btn-stay').style.display = 'none';
        document.getElementById('btn-reset').style.display = 'inline-block';
    }

    function runSimulation() {
        for(let i=0; i<1000; i++) {
            let car = Math.floor(Math.random() * 3);
            let pick = Math.floor(Math.random() * 3);
            // Stay strategy: Win if pick == car
            results.stay.total++;
            if (pick === car) results.stay.wins++;
            
            // Switch strategy: Win if pick != car
            results.switch.total++;
            if (pick !== car) results.switch.wins++;
        }
        updateStats();
    }

    function updateStats() {
        let stayRate = results.stay.total ? Math.round((results.stay.wins/results.stay.total)*100) : 0;
        let switchRate = results.switch.total ? Math.round((results.switch.wins/results.switch.total)*100) : 0;
        
        document.getElementById('win-stay').innerText = stayRate + "%";
        document.getElementById('bar-stay').style.height = stayRate + "%";
        
        document.getElementById('win-switch').innerText = switchRate + "%";
        document.getElementById('bar-switch').style.height = switchRate + "%";
    }

    initGame();
</script>
</body>
</html>